% !TEX program = xelatex
% !TeX spellcheck = ru_RU_yo

\documentclass[crop,tikz]{standalone}

\usepackage{amsmath}
\usepackage{fontspec}
\setmainfont{CMU Serif}

\usepackage{pgfplots}

\usepackage{polyglossia}
\setdefaultlanguage[spelling=modern]{russian}
\newfontfamily{\cyrillicfont}{PT Astra Sans}
\newfontfamily{\cyrillicfontsf}{PT Astra Sans}
\newfontfamily{\cyrillicfonttt}{PT Mono}

\usetikzlibrary{arrows.meta,fit,calc}

\tikzset{scheme part/.style={
  black,
  very thick,
  inner sep=0pt,
  draw=black,
  font=\huge,
  rounded corners=2mm
}}

\begin{document}
\begin{tikzpicture}[domain=0:20,samples=300]
  % \draw[step=1cm,black,thin,opacity=0.2,dashed] (23.05,-0.05) grid (-0.05,15.05);
  \draw[opacity=0] (24.05,-0.05) grid (-0.05,15.05);

  % \draw (0,0) -- (0,15) -- (23,15) -- (23,0) -- (0,0);

  % Server
  \node[
    scheme part,
    fit={(1,14) (10,3)},
    dashed,
    gray
  ] (rect) {};

  \draw[scheme part, gray]
    (2,13) rectangle (9,11)
    node[align=center, pos=.5] {Демоны и сервисы};

  \draw[scheme part, gray]
    (2,10) rectangle (9,7)
    node[align=center, pos=.5, yshift=-3pt] {Python (Flask) + \\ Socket.io сервер};

  \draw[scheme part, gray]
    (2,6) rectangle (9,4)
    node[align=center, pos=.5] {RTKLIB};

  \draw[-{Latex[length=3.5mm]}, ultra thick, gray] (3,10) -- (3,11);
  \draw[-{Latex[length=3.5mm]}, ultra thick, gray] (8,11) -- (8,10);
  
  \draw[-{Latex[length=3.5mm]}, ultra thick, gray] (3,6) -- (3,7);
  \draw[-{Latex[length=3.5mm]}, ultra thick, gray] (8,7) -- (8,6);

  % Client
  \node[
    scheme part,
    fit={(12,11) (23,6)},
    dashed
  ] (rect) {};

  \draw[scheme part]
    (13,10) rectangle (17,7)
    node[align=center, pos=.5, yshift=-1pt] {Socket.io \\ клиент};

  \draw[scheme part]
    (18,10) rectangle (22,7)
    node[align=center, pos=.5] {JS (Vue.js) \\ HTML};

  \draw[-{Latex[length=3.5mm]}, ultra thick] (9,9.25) -- (13,9.25);
  \draw[-{Latex[length=3.5mm]}, ultra thick] (13,7.75) -- (9,7.75);

  \draw[-{Latex[length=3.5mm]}, ultra thick] (17,9.25) -- (18,9.25);
  \draw[-{Latex[length=3.5mm]}, ultra thick] (18,7.75) -- (17,7.75);

  \draw [black,ultra thick,decorate,decoration={brace,amplitude=15pt}, gray]
    (10,2.5)  -- (1,2.5) 
    node [black,midway,below=20pt, gray] {\Large Серверная часть};

  \draw [black,ultra thick,decorate,decoration={brace,amplitude=15pt}]
    (23,2.5)  -- (12,2.5) 
    node [black,midway,below=20pt] {\Large Клиентская часть};
\end{tikzpicture}
\end{document}