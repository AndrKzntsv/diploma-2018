\mysection{АНАЛИЗ ПРЕДМЕТНОЙ ОБЛАСТИ}

\subsection{Особенности работы GPS-приёмников}
\label{subsec:gps-receivers}

Каждый GPS-приёмник определяет свои координаты, основываясь на расстояниях до спутников, с~которых он получает сигналы. Данные расстояния вычисляются из времени, которое требуется радиосигналам для прохождения от космических аппаратов до приёмника. \par

Для установления позиции приёмнику необходимо получать сигналы минимум от четырёх спутников. Каждый из этих сигналов может быть искажён при прохождении через слои атмосферы или при отражении от различных наземных объектов (рис.~\ref{fig:signal-distortion}) -- данные явления вызывают появление ошибок и~задержек, что отрицательно сказывается на точности позиционирования. \par

\begin{figure}[h!]
  \centering
  \setlength{\fboxsep}{5pt}
  \includegraphics[height=8cm]{img/tikz/signal-distortion/pic}
  \caption{Источники ошибок: атмосферные задержки и~переотражение сигнала}\label{fig:signal-distortion}
\end{figure}

Важную роль в~решении проблемы, описанной выше, играет масштабность системы GPS. Расстояние между наземными объектами и~космическими спутниками так велико, что многие расстояния на земле становятся незначительными. Иными словами, если разместить два приёмника на расстоянии нескольких сотен километров друг от друга, то сигналы, которые они будут получать со~спутников, будут проходить практически через одну и~ту же часть атмосферы, что позволит считать ошибки на обоих приёмниках одинаковыми (рис.~\ref{fig:dgps-one}). \par

\begin{figure}[h!]
  \centering
  \setlength{\fboxsep}{5pt}
  \includegraphics[height=8cm]{img/tikz/dgps-one/pic}
  \caption{Два приёмника получают сигналы с~одного и~того же спутника}\label{fig:dgps-one}
\end{figure}

Описанный выше принцип не является лишь теоретическими рассуждениями -- данный способ устранения ошибок применяется на практике и~является основой \emph{дифференциальной GPS}.

\subsection{Дифференциальная GPS и~кинематика реального времени}
\label{subsec:dgps-and-rtk}

\subsubsection{Дифференциальная GPS}
\label{subsec:dgps}

Дифференциальная GPS (англ. \emph{Differential Global Positioning System, DGPS}) -- система, предназначенная для повышения точности сигналов GPS. Принцип работы данной системы заключается в~измерении и~учёте разницы между рассчитанной и~закодированной псевдодальностями до спутников \cite{Trimble}. \par

Важнейшей особенность DGPS является использование двух приёмников при проведении измерений:

\begin{dashitemize}
  \item \textbf{База} (англ. \emph{base}) -- стационарный приёмник, который находится в~точке с~заранее рассчитанной координатой. База транслирует данные о~разнице между информацией о~позиции, полученной со~спутника, и~закодированными данными о~своём местонахождении.
  \item \textbf{Ровер} (англ. \emph{rover}) -- приёмник, с~помощью которого производятся какие-либо измерения. Используя данные, полученные с~базы, ровер учитывает влияние внешних факторов на расчёт координаты, тем самым получая более точную информацию о~своём местонахождении.
\end{dashitemize}

Таким образом, работа дифференциальной GPS основана на следующем принципе: считая искажения спутниковых сигналов одинаковыми для близлежащих приёмников, мы получаем возможность вносить поправки в~получаемое решение, улучшая результаты измерений.

\subsubsection{Кинематика реального времени}
\label{subsec:rtk}

Кинематика реального времени (англ. \emph{Real Time Kinematic, RTK}) -- режим работы, при котором приём и~применение поправок с~базы происходят в~реальном времени, что позволяет получать результат практически сразу. Важнейшей особенностью данного режима является тот факт, что для обеспечения работы необходима постоянная связь между ровером и~базой. \par

RTK представляется крайне удобным инструментом для задач, решение которых подразумевает использование высокоточного позиционирования. Однако, алгоритмы дифференциальной GPS, обеспечивающие работу RTK, весьма сложны, и~производители приёмников предлагают решение в~виде закрытого, проприетарного программного обеспечения, встроенного в~их продукты. Стоимость приёмников, поддерживающих дифференциальный режим работы, достаточно высока и~может превышать $10000$ долларов США. \par

Высокая стоимость оборудования является причиной того, что использование технологии дифференциальной GPS распространено только в~таких специфических областях деятельности, как геодезия, земельный кадастр и~т.п. Однако, для тех людей, которым по каким-либо причинам недоступны дорогостоящие устройства, решением может стать RTKLIB -- программный комплекс, реализующий вышеупомянутые алгоритмы для стандартных, общедоступных GPS-приёмников.

\subsection{Программный пакет RTKLIB}
\label{subsec:rtklib}

RTKLIB -- программный пакет с~открытым исходным кодом, предназначенный для осуществления стандартного и~высокоточного позиционирования с~помощью ГНСС (глобальных навигационных спутниковых систем). В~состав пакета входит библиотека функций и~ряд приложений, использующих данную библиотеку. \par

Создателем RTKLIB является Томодзи Такасу, профессор Токийского Университета Морских Наук и~Технологий. Существенный вклад в~кодовую базу проекта был внесён Мишелем Баваро \cite{RTKLIB,Bavaro}, итальянским инженером с~огромным опытом работы в~сфере спутниковой навигации. \par

Начиная с~релиза первой версии RTKLIB, состоявшегося в~2007 году, проект активно развивается и~на данный момент представляет собой систему из восьми приложений, некоторые из которых имеют как графический, так и~консольный интерфейс. \par

Функции компонентов RTKLIB подробно описаны в~прилагающейся к~проекту официальной документации. Ниже будут рассмотрены наиболее важные для данной работы возможности программного комплекса.

\subsubsection{Поддерживаемые спутниковые системы}
\label{subsec:rtklib-supported-gnss}

RTKLIB поддерживает работу с~шестью основными системами спутниковой навигации:

\begin{dashitemize}
  \item GPS;
  \item GLONASS;
  \item Galileo;
  \item QZSS;
  \item BeiDou;
  \item SBAS.
\end{dashitemize}

Основной системой, позволяющей осуществлять высокоточное позиционирование является GPS. Остальные системы, как правило, служат источником дополнительных данных, которые помогают опровергнуть или подтвердить получаемое решение.

\subsubsection{Режимы работы}
\label{subsec:rtklib-modes}

Программный комплекс RTKLIB поддерживает несколько режимов работы, каждый из которых предназначен для решения различных навигационных задач. При выборе того или иного режима процесс работы с~приёмником может измениться коренным образом. Рассмотрим особенности и~назначение основных режимов работы комплекса:

\begin{dashitemize}
  \item \textbf{Single}, или \textbf{Single point positioning} (рис.~\ref{fig:rtk-single}). Базовый режим работы, при использовании которого можно получить координаты со~стандартной точностью. В~режиме Single местоположение определяется с~помощью данных одного приёмника -- база в~данном режиме не используется. \par
  
  \begin{figure}[h!]
    \centering
    \setlength{\fboxsep}{5pt}
    \includegraphics[height=8cm]{img/tikz/rtk-single/pic}
    \caption{Режим Single. Корабли, исполняющие роли роверов, не используют поправки с~базы, которая установлена на берегу}\label{fig:rtk-single}
  \end{figure}

  При использовании режима Single RTKLIB производит расчёт координаты, используя данные о~спутниках навигационной системы. Однако, сами приёмники, как правило, берут на себя задачу расчёта местоположения, т.к. они изначально оптимизированы для получения single-решения. \par
  RTKLIB в~режиме Single используется только на приёмниках, которые поддерживают функцию выдачи необработанных (или <<сырых>>) данных: фазовых измерений, псевдодальностей и~т.д. При работе в~данном режиме RTKLIB создаёт файлы логов <<сырых>> данных, которые далее можно будет использовать для постобработки (англ. \emph{post-processing}).
  
  \item \textbf{Static} и~\textbf{Kinematic} (рис.~\ref{fig:rtk-static-kinematic}). При данных настройках RTKLIB позволяет перейти от постобработки накопленных логов к~измерениям в~режиме реально времени (RTK). В~режимах Static и~Kinematic данные ровера используются вместе данными базовой станции, что позволит определять позицию ровера гораздо точнее. \par
  Отличием между режимами Static и~Kinematic является подвижность ровера. Если при работе в~режиме Static ровер считается неподвижным, то в~режиме Kinematic ровер находится в~движении. \par
  
  \begin{figure}[h!]
    \centering
    \setlength{\fboxsep}{5pt}
    \includegraphics[height=8cm]{img/tikz/rtk-static-kinematic/pic}
    \caption{Режимы Static и~Kinematic. Корабли, исполняющие роли роверов, используют поправки с~базы, которая установлена на берегу}\label{fig:rtk-static-kinematic}
  \end{figure}
  
  Как и~в~случае Single, в~рассматриваемых режимах RTKLIB позволяет записывать логи необработанных данных ровера, однако важно отметить, что параллельно с~этим можно также вести лог поправок, получаемых с~базы. Сбор всех этих данных может быть крайне полезен для определения и~решения проблем связи между двумя приёмниками.
  
  \item \textbf{Moving-Baseline} (рис.~\ref{fig:rtk-moving-baseline}). Данный режим схож с~режимом Kinematic, однако имеет одно ключевое отличие -- движущуюся базу. Moving-Baseline не предназначен для улучшения точности абсолютного позиционирования, однако относительно друг друга база и~ровер будут получать точные координаты -- работая в~этом режиме, можно получить аналог GPS компаса.
  
  \begin{figure}[h!]
    \centering
    \setlength{\fboxsep}{5pt}
    \includegraphics[height=8cm]{img/tikz/rtk-moving-baseline/pic}
    \caption{Режим Moving-Baseline. Один из кораблей выполняет роль базы и~передаёт поправки на корабль-ровер; оба корабля находятся в~движении}\label{fig:rtk-moving-baseline}
  \end{figure}
  
  \item \textbf{Precise point positioning}, или \textbf{PPP}. Режимы работы (PPP-Static, PPP-Kinematic и~PPP-Fixed), которые используются для подготовке к~работе в~режиме RTK. \par
  Среди перечисленных выше PPP режимов интерес для данной работы представляет PPP-Static, который используется для определения позиции будущей базы. Суть работы RTKLIB при таких настройках заключается в~накоплении и~усреднении информации о~текущей позиции приёмника. Проработав таким образом в~одной точке несколько часов, приёмник может с~хорошей степенью точности определить координаты своего местоположения и~выдать данные для настройки базы.
\end{dashitemize}

\subsubsection{Поддерживаемые форматы данных}
\label{subsec:rtklib-data-formats}

RTKLIB поддерживает множество форматов хранения данных, используемых при работе с~ГНСС. Набор поддерживаемых форматов включает в~себя как независимые от специфических устройств форматы (стандартные форматы), так и~форматы, используемые для выдачи координат лишь GPS-приём-никами определённых производителей (проприетарные форматы). \par

Стандартные форматы сообщений:
\begin{dashitemize}
  \item RINEX (сокр. англ. \emph{Receiver Independent Exchange Format});
  \item RTCM (сокр. англ. \emph{Radio Technical Commission for Maritime Services});
  \item NMEA (сокр. англ. \emph{National Marine Electronics Association}).
\end{dashitemize}

Примеры поддерживаемых проприетарных форматов сообщений:
\begin{dashitemize}
  \item UBX (приёмники u-blox);
  \item NovAtel;
  \item Hemisphere;
  \item JAVAD;
  \item Furuno;
  \item NVS.
\end{dashitemize}

\subsubsection{Программы, входящие в~состав RTKLIB}
\label{subsec:rtklib-apps}

Для понимания внутреннего устройства и~получения представления о~функциональности различных компонентов RTKLIB, следует рассмотреть программы, входящие в~состав данного программного пакета. Последние версии RTKLIB -- 2.4.2 и~2.4.3 beta -- включают в~себя восемь приложений, отвечающих за различные функции комплекса (таблица~\ref{table:rtklib-apps}). \par

\ctable[
  pos=h!,
  caption={Программы, входящие в состав RTKLIB},
  label={table:rtklib-apps}
  ]{|c|l|c|c|}{
    ~\\[-0.5em]
    \tnote[*]{Графическое приложение}
    \tnote[**]{Консольное приложение}
  }{
    \toprule
    \textbf{№} & \multicolumn{1}{c|}{\textbf{Назначение}} & \textbf{GUI}\tmark[*] & \textbf{CUI}\tmark[**] \\
    \midrule
    1 & Запуск приложений RTKLIB & RTKLAUNCH & - \\
    \midrule
    2 & \makecell[l]{Позиционирование в режиме\\[-0.5em] реального времени} & RTKNAVI & RTKRCV \\
    \midrule
    3 & Мультиплексор потоков данных & STRSVR & STR2STR \\
    \midrule
    4 & Постобработка данных & RTKPOST & RNX2RTKP \\
    \midrule
    5 & Конвертер данных & RTKCONV & CONVBIN \\
    \midrule
    6 & \makecell[l]{Графическое отображение\\[-0.5em] полученных данных} & RTKPLOT & - \\
    \midrule
    7 & Скачивание данных ГНСС & RTKGET & - \\
    \midrule
    8 & NTRIP браузер & SRCTBLBROWS & - \\
    \bottomrule
  }

В~рамках данной работы рассматриваются три приложения RTKLIB, отвечающие за ключевые функции, необходимые при решении задач навигации и~позиционирования: RTKNAVI, STRSVR и~RTKCONV.

\begin{dashitemize}
  \item \textbf{RTKNAVI} -- программа, обеспечивающая работу приёмника в~режиме RTK. RTKNAVI выполняет все задачи, возлагаемые на ровер:
  \begin{dashitemize}
    \item приём необработанных данных с~GPS-приёмника;
    \item приём поправок с~базы;
    \item ведение логов полученных данных;
    \item обработка данных с~помощью RTK алгоритмов;
    \item выдача полученного решения в~указанном формате.
  \end{dashitemize}

  Также, с~помощью RTKNAVI пользователь получает наглядную информацию о~качестве текущего решения и~о~сигналах, получаемых ровером и~базой со~спутников. \par
  
  RTKNAVI имеет консольный аналог -- приложение \textbf{RTKRCV}. Текстовое версия поддерживает все функции графического приложения, включая вывод информации о~решении, спутниках и~текущих координатах. \par
  Важным отличием двух вариантов приложения является способ установки настроек -- если RTKRCV имеет отдельное окно с~графическими элементами управления, то RTKRCV настраивается только с~помощью конфигурационных файлов, работа с~которыми требует от пользователя определённых навыков.
  
  \item \textbf{STRSVR} (в~консольная версии -- \textbf{STR2STR}) является мультиплексором потоков данных, который позволяет создать до трёх каналов передачи связи, в~которые будет направлен вывод подключённого к~компьютеру GPS-приёмника. \par
  STRSVR предоставляет широкий набор возможностей по перенаправлению данных:
  
  \begin{dashitemize}
    \item передача через COM-порты;
    \item передача через TCP сокеты;
    \item передача через NTRIP-серверы;
    \item запись в~файл.
  \end{dashitemize}

  Также STRSVR обеспечивает (для каждого из выходных потоков) конвертацию входящих данных в~указанный пользователем формат. Только STRSVR может осуществлять выдачу информации в~легковесном формате RTCM3, что необходимо для обеспечения работы в~режиме базы.
  
  \item \textbf{RTKCONV}, или его консольный аналог \textbf{CONVBIN} -- конвертер данных, получаемых со~спутников. Одно из самых важных применений данной программы -- конвертация файлов логов из форматов, привязанных к~конкретным приёмникам, в~независимый формат RINEX. \par
  
  Использование RTKCONV может быть обусловлено необходимостью проведения дальнейшего анализа и~постобработки данных с~использованием специального программного обеспечения.
\end{dashitemize}

\subsection{Основные проблемы использования RTKLIB}
\label{subsec:rtklib-problems}

RTKLIB предоставляет широчайший спектр возможностей, а~исходный код данного проекта является открытым. Однако, данный комплекс распространён достаточно слабо и~не является широко известным. Данный факт связан отнюдь не с~низким качеством результатов работы RTKLIB, а, в~первую очередь, с~удобством использования данного программного продукта. \par

Графические версии приложений RTKLIB возможно запустить только в~среде операционной системы семейства Windows. Однако, достаточно проблематично обеспечить запуск графических Windows-приложений, к~примеру, на беспилотном летательном аппарате или на ГНСС-приёмнике. Но полностью раскрыть потенциал RTK можно именно при интеграции программного обеспечения в~технику. Данный факт делает консольные версии программ RTKLIB более привлекательным вариантом. \par

Входящие в~состав пакета текстовые приложения не требуют больших вычислительных ресурсов и~могут быть запущены на огромном количестве платформ под управлением GNU/Linux. Но важно понимать, что для работы с~консольными приложениями необходимо постоянно поддерживать работу одного или нескольких терминалов, а~также иметь компьютер с~клавиатурой и~доступом к~данным приёмника. \par

Вне зависимости от того, используются ли графические или консольные версии приложений, невозможно использовать обширные возможности RTKLIB без знания особенностей процесса конфигурирования данного комплекса. Огромное количество настроек вкупе с~различными режимами работы могут вызвать трудности при освоении RTKLIB новыми пользователями, а~разнообразные конфигурационные файлы и~неочевидные с~первого взгляда решения в~дизайне графических настроек способны запутать даже опытных пользователей. \par

Таким образом, можно выделить следующий ряд трудностей, которые могут возникнуть при использовании RTKLIB:

\begin{dashitemize}
  \item работа с~комплексом возможна только при наличии компьютера с~клавиатурой;
  \item графические приложения, входящие в~состав пакета, можно запустить только при использовании операционной системы семейства Windows;
  \item конфигурационные файлы консольных версий программ имеют достаточно сложный синтаксис;
  \item большое количество доступных настроек может затруднить освоение комплекса новыми пользователями.
\end{dashitemize}

В~качестве решения проблем, перечисленных выше, предлагается создать веб-приложение, с~помощью которого можно было бы осуществлять контроль над работой RTKLIB, используя практически любое устройство с~веб-браузером. Работа подобного приложения будет обеспечиваться с~помощью дополнительного программного обеспечения, добавленного на вычислительный модуль, на котором запущен RTKLIB. Осуществляя с~помощью такого программного обеспечения обмен командами и~информацией между веб-интерфейсом и~RTKRCV, можно осуществлять работу с~RTKLIB, используя смартфон или планшет.

\subsection{Обзор существующих веб-приложений, предназначенных для работы с~устройствами без органов управления}
\label{subsec:web-apps-review}

В~настоящее время существует достаточно большое количество электроники, единственным способом управления которой является специальный веб-интерфейс. Примером подобных устройств служат маршрутизаторы и~одноплатные компьютеры. \par

В~рамках проведённого обзора были рассмотрены популярные операционные системы, позволяющие осуществлять управление устройством, на которое они установлены, через веб-браузер:

\begin{dashitemize}
  \item \textbf{OpenWrt} -- дистрибутив GNU/Linux, предназначенный для установки на маршрутизаторы.
  \item \textbf{Windows 10 IoT Core} -- версия операционной системы Windows, созданная специально для встраиваемых решений.
\end{dashitemize}

\subsubsection{OpenWrt}
\label{subsec:openwrt-review}

Работа с~маршрутизаторами, находящимися под управлением OpenWrt, производится через специальный веб-интерфейс под названием \textbf{LuCI}. Данный интерфейс представляет собой одностраничное веб-приложение, доступное через браузер любого устройства, подключённого к~сети маршрутизатора. LuCI позволяет пользователю:

\begin{dashitemize}
  \item произвести настройку маршрутизатора;
  \item просмотреть информацию о~маршрутизаторе и~установленном программном обеспечении;
  \item просмотреть информацию о~подключённых устройствах и~трафике.
\end{dashitemize}

В~интерфейсе LuCI доступ к~различным страницам и~настройкам осуществляется через меню в~верхней части веб-страницы (рис.~\ref{fig:openwrt-menu}). Все пункты верхнего меню, за исключением кнопки выхода из системы, представляют собой выпадающие меню, позволяющие перейти на одну из страниц соответствующей категории.

\begin{figure}[h!]
  \centering
  \includegraphics[height=5cm]{img/openwrt-menu}
  \vspace*{12pt}
  \caption{Главное меню LuCI}\label{fig:openwrt-menu}
\end{figure}

Благодаря разнообразным веб-элементам и~возможностям JavaScript в~LuCI пользователь получает возможность удобно редактировать различные настройки маршрутизатора с~помощью интерактивных форм (рис.~\ref{fig:openwrt-logging-settings}), что позволяет производить конфигурацию устройства, используя практически любой компьютер или смартфон.

\begin{figure}[h!]
  \centering
  \includegraphics[height=10cm]{img/openwrt-logging-settings}
  \vspace*{12pt}
  \caption{LuCI: Форма настройки системных логов}\label{fig:openwrt-logging-settings}
\end{figure}

Также, OpenWrt демонстрирует прекрасный пример применения современных веб-технологий для визуализации данных. Через интерфейс LuCI пользователь может наблюдать за текущей загрузкой сети с~помощью специального графика (рис.~\ref{fig:openwrt-load-graph}).

\begin{figure}[h!]
  \centering
  \includegraphics[height=9.5cm]{img/openwrt-load-graph}
  \vspace*{0pt}
  \caption{LuCI: График загрузки сети}\label{fig:openwrt-load-graph}
\end{figure}

\subsubsection{Windows 10 IoT Core}
\label{subsec:win10-review}

Windows 10 IoT Core позволяет использовать операционную систему Windows на таких устройствах, как Raspberry PI или MinnowBoard. Так как подобные встраиваемые решения зачастую не имеют экрана и~клавиатуры, взаимодействие пользователя с~системой осуществляется с~помощью веб-страницы (рис.~\ref{fig:win10-device-info}).

\begin{figure}[h!]
  \centering
  \includegraphics[height=10cm]{img/win10-device-info}
  \vspace*{12pt}
  \caption{Главная страница Windows 10 IoT Core}\label{fig:win10-device-info}
\end{figure}

Различные функции, предоставляемые системой, доступны пользователю через специальное боковое меню (рис.~\ref{fig:win10-settings}). При переключении между пунктами меню веб-приложение отображает страницы с~различными панелями управления. \par

Богатые возможности веб-технологий позволяют отобразить в~браузере привычные для операционной системы Windows утилиты: менеджер установленных приложений, диспетчер задач, панель настройки беспроводных подключений, менеджер подключённых устройств (рис.~\ref{fig:win10-settings}) и~т.д.

\begin{figure}[h!]
  \centering
  \includegraphics[height=9.5cm]{img/win10-settings}
  \vspace*{12pt}
  \caption{Windows 10 IoT Core: Менеджер подключённых устройств}\label{fig:win10-settings}
\end{figure}

\subsection{Выводы по разделу 1}
\label{subsec:section1-conclusions}

На основании обзора существующих веб-приложений, предназначенных для работы с~устройствами без органов управления, можно сделать следующие выводы:

\begin{dashitemize}
  \item Одностраничные приложения являются наиболее удачным решением при создании веб-интерфейсов для устройств без органов управления. Отсутствие долгой загрузки при переключении между различными представлениями и~получение необходимых данных с~помощью асинхронных запросов благоприятно влияют на опыт пользователя (англ. \emph{User experience, UX}).
  \item Выпадающие списки, текстовые поля с~валидацией введённых значений, флажки, переключатели и~другие веб-элементы позволяют представить сложные конфигурационные файлы в~виде интуитивно понятных форм настроек.
  \item С~помощью векторных изображений и~JavaScript можно создавать наглядные графики и~диаграммы для визуализации различной информации, обновляемой в~режиме реального времени.
\end{dashitemize}

Проведённый обзор показал распространённость использования веб-приложений для управления встраиваемыми решения, что ещё раз подчёркивает актуальность предлагаемой работы. При учёте сделанных наблюдений и~выводов становится возможно создание браузерного приложения, которое существенно облегчит использование GPS-приёмника, работа которого основана на использовании RTKLIB.

\newpage
